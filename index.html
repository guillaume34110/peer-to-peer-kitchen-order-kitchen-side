<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Receiver</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <header class="header">
        <div class="header__nav">
            <nav class="nav-tabs">
                <button id="nav-kitchen" class="nav-tab nav-tab--active" data-i18n="kitchen">
                    ğŸ³ Cuisine
                </button>
                <button id="nav-menu" class="nav-tab" data-i18n="menu">
                    ğŸ“‹ Menu
                </button>
                <button id="nav-orderlist" class="nav-tab" data-i18n="orderList">
                    ğŸ“‹ Liste commandes
                </button>
                <button id="nav-ingredients" class="nav-tab" data-i18n="ingredients">
                    ğŸ¥• IngrÃ©dients
                </button>
                <button id="nav-stats" class="nav-tab" data-i18n="stats">
                    ğŸ“Š Statistiques
                </button>
                <button id="nav-qrcodes" class="nav-tab" data-i18n="qrCodes">
                    ğŸ”— QR Codes
                </button>
            </nav>
        </div>
        <div class="header__controls">
            <button id="settings-btn" class="btn btn--secondary">
                âš™ï¸ <span data-i18n="settings">ParamÃ¨tres</span>
            </button>
            <div class="connection-status" id="connection-status">
                <span class="status-dot" id="status-dot"></span>
                <span id="status-text">Connexion...</span>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="tables-grid" id="tables-grid">
            <!-- Tables gÃ©nÃ©rÃ©es dynamiquement -->
        </div>
    </main>

    <!-- Modal des paramÃ¨tres -->
    <div class="modal" id="settings-modal">
        <div class="modal__content">
            <h2 data-i18n="settings">ParamÃ¨tres</h2>
            
            <div class="setting-group">
                <label data-i18n="language">Langue :</label>
                <select id="language-select">
                    <option value="fr">FranÃ§ais</option>
                    <option value="th">à¹„à¸—à¸¢</option>
                </select>
            </div>

            <div class="setting-group">
                <label data-i18n="gridSize">Taille de la grille :</label>
                <div class="grid-controls">
                    <input type="number" id="grid-cols" min="1" max="5" value="3">
                    <span>Ã—</span>
                    <input type="number" id="grid-rows" min="1" max="5" value="3">
                </div>
            </div>

            <div class="modal__actions">
                <button id="settings-close" class="btn btn--primary" data-i18n="close">Fermer</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data/menu.js" type="module"></script>
    <script src="data/ingredients.js" type="module"></script>
    <script src="script/i18n.js"></script>
    <script src="script/state.js"></script>
    <script src="script/ui.js"></script>
    <script src="script/settings.js"></script>
    <script src="script/websocket.js"></script>
    <script src="script/menuManager.js"></script>
    <script src="script/menuUI.js"></script>
    <script src="script/ingredientsManager.js"></script>
    <script src="script/ingredientsUI.js"></script>
    <script src="script/orderListUI.js"></script>
    <script src="script/statsManager.js"></script>
    <script src="script/statsUI.js"></script>
    <script src="script/qrCodeManager.js"></script>
    
    <script>
        // Module de navigation entre les vues
        const AppNavigation = {
            currentView: 'kitchen',

            init() {
                this.bindEvents();
                console.log('AppNavigation initialisÃ©');
            },

            bindEvents() {
                document.getElementById('nav-kitchen')?.addEventListener('click', () => {
                    this.switchToView('kitchen');
                });
                
                document.getElementById('nav-menu')?.addEventListener('click', () => {
                    this.switchToView('menu');
                });
                
                document.getElementById('nav-orderlist')?.addEventListener('click', () => {
                    this.switchToView('orderlist');
                });
                
                document.getElementById('nav-ingredients')?.addEventListener('click', () => {
                    this.switchToView('ingredients');
                });
                
                document.getElementById('nav-stats')?.addEventListener('click', () => {
                    this.switchToView('stats');
                });
                
                document.getElementById('nav-qrcodes')?.addEventListener('click', () => {
                    this.switchToView('qrcodes');
                });
            },

            switchToView(view) {
                if (this.currentView === view) return;

                // Mettre Ã  jour les boutons de navigation
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('nav-tab--active');
                });
                document.getElementById(`nav-${view}`)?.classList.add('nav-tab--active');

                // Switcher les vues
                if (view === 'kitchen') {
                    MenuUI.hideMenuView();
                    OrderListUI.hideOrderListView();
                    StatsUI.hideStatsView();
                    document.getElementById('tables-grid').style.display = 'grid';
                    this.currentView = 'kitchen';
                } else if (view === 'menu') {
                    OrderListUI.hideOrderListView();
                    StatsUI.hideStatsView();
                    document.getElementById('tables-grid').style.display = 'none';
                    MenuUI.showMenuView();
                    this.currentView = 'menu';
                } else if (view === 'orderlist') {
                    MenuUI.hideMenuView();
                    StatsUI.hideStatsView();
                    IngredientsUI.hideIngredientsView();
                    document.getElementById('tables-grid').style.display = 'none';
                    OrderListUI.showOrderListView();
                    this.currentView = 'orderlist';
                } else if (view === 'ingredients') {
                    MenuUI.hideMenuView();
                    OrderListUI.hideOrderListView();
                    StatsUI.hideStatsView();
                    document.getElementById('tables-grid').style.display = 'none';
                    IngredientsUI.showIngredientsView();
                    this.currentView = 'ingredients';
                } else if (view === 'stats') {
                    MenuUI.hideMenuView();
                    OrderListUI.hideOrderListView();
                    IngredientsUI.hideIngredientsView();
                    document.getElementById('tables-grid').style.display = 'none';
                    StatsUI.showStatsView();
                    this.currentView = 'stats';
                } else if (view === 'qrcodes') {
                    MenuUI.hideMenuView();
                    OrderListUI.hideOrderListView();
                    IngredientsUI.hideIngredientsView();
                    StatsUI.hideStatsView();
                    document.getElementById('tables-grid').style.display = 'none';
                    QRCodeManager.showQRCodeView();
                    this.currentView = 'qrcodes';
                }
            }
        };

        // Initialisation de l'application
        document.addEventListener('DOMContentLoaded', async () => {
            await I18n.init();
            await Settings.init();
            MenuManager.init();
            IngredientsManager.init();
            StatsManager.init();
            State.init();
            UI.init();
            MenuUI.init();
            OrderListUI.init();
            IngredientsUI.init();
            StatsUI.init();
            QRCodeManager.init();
            AppNavigation.init();
            WebSocketManager.init();
            
            // Attacher les Ã©vÃ©nements de navigation aprÃ¨s initialisation de MenuUI
            setTimeout(() => {
                MenuUI.bindCardEvents();
            }, 100);
        });
    </script>
</body>
</html> 